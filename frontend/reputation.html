<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Mi Reputación - Astren</title>
    <meta name="description" content="Visualiza tu reputación profesional en Astren - Sistema de estrellas basado en evidencias y productividad.">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/reputation.css">
</head>
<body class="dashboard-body">
    <div class="dashboard">
        <!-- El sidebar será inyectado dinámicamente por sidebar-new.js -->

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="dashboard__header">
                <div class="header__container">
                    <div class="header__left">
                        <button class="mobile-menu-btn" id="mobileMenuBtn">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h1 class="header__title">
                            <i class="fas fa-star"></i>
                            Mi Reputación
                        </h1>
                    </div>
                    <div class="header__right">
                        <div class="header__search">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Buscar en reputación..." class="search__input">
                        </div>
                        <button class="header__notification" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <span class="notification__badge" id="notificationBadge">0</span>
                        </button>
                        <div class="header__profile">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%233366FF'%3E%3Cpath fill-rule='evenodd' d='M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z' clip-rule='evenodd' /%3E%3C/svg%3E" alt="Avatar">
                        </div>
                    </div>
                </div>
            </header>

            <!-- Reputation Content -->
            <div class="dashboard__content">
                <!-- Reputation Overview -->
                <div class="reputation__overview">
                    <!-- Main Score Card -->
                    <div class="reputation__score-card">
                        <div class="score-card__header">
                            <div class="score-card__main">
                                <div class="score__value" id="overallScore">4.2</div>
                                <div class="score__stars" id="overallStars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                                <div class="score__label">Reputación General</div>
                            </div>
                            <div class="score-card__level">
                                <div class="level__badge" id="levelBadge">
                                    <i class="fas fa-medal"></i>
                                    <span>Plata</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="score-card__stats">
                            <div class="stat__item">
                                <div class="stat__value" id="rankingValue">#127</div>
                                <div class="stat__label">Ranking Global</div>
                            </div>
                            <div class="stat__item">
                                <div class="stat__value" id="tasksEvaluated">156</div>
                                <div class="stat__label">Tareas Evaluadas</div>
                            </div>
                            <div class="stat__item">
                                <div class="stat__value" id="nextLevelProgress">75%</div>
                                <div class="stat__label">Próximo Nivel</div>
                            </div>
                        </div>

                        <div class="score-card__progress">
                            <div class="progress__bar">
                                <div class="progress__fill" id="progressFill" style="width: 75%"></div>
                            </div>
                            <div class="progress__text">
                                <span id="progressText">75% hacia Oro</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="reputation__quick-stats">
                        <div class="quick-stats__header">
                            <h3>Estadísticas Rápidas</h3>
                            <button class="button button--ghost button--small" id="refreshStats">
                                <i class="fas fa-sync-alt"></i>
                                Actualizar
                            </button>
                        </div>
                        
                        <div class="quick-stats__grid">
                            <div class="quick-stat__card">
                                <div class="quick-stat__icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="quick-stat__content">
                                    <div class="quick-stat__value" id="totalStars">1,247</div>
                                    <div class="quick-stat__label">Estrellas Totales</div>
                                </div>
                            </div>
                            
                            <div class="quick-stat__card">
                                <div class="quick-stat__icon">
                                    <i class="fas fa-calendar-week"></i>
                                </div>
                                <div class="quick-stat__content">
                                    <div class="quick-stat__value" id="weeklyAverage">4.3</div>
                                    <div class="quick-stat__label">Promedio Semanal</div>
                                </div>
                            </div>
                            
                            <div class="quick-stat__card">
                                <div class="quick-stat__icon">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="quick-stat__content">
                                    <div class="quick-stat__value" id="streakDays">12</div>
                                    <div class="quick-stat__label">Días de Racha</div>
                                </div>
                            </div>
                            
                            <div class="quick-stat__card">
                                <div class="quick-stat__icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="quick-stat__content">
                                    <div class="quick-stat__value" id="groupsActive">5</div>
                                    <div class="quick-stat__label">Grupos Activos</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reputation Breakdown -->
                <div class="reputation__breakdown">
                    <!-- Categories Performance -->
                    <div class="reputation__categories">
                        <div class="categories__header">
                            <h3>Rendimiento por Categorías</h3>
                            <div class="categories__filters">
                                <button class="filter-btn filter-btn--active" data-filter="all">Todas</button>
                                <button class="filter-btn" data-filter="work">Trabajo</button>
                                <button class="filter-btn" data-filter="school">Estudio</button>
                                <button class="filter-btn" data-filter="personal">Personal</button>
                            </div>
                        </div>
                        
                        <div class="categories__grid" id="categoriesGrid">
                            <!-- Categories will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="reputation__charts">
                        <div class="chart__container">
                            <div class="chart__header">
                                <h3>Evolución de Reputación</h3>
                                <div class="chart__controls">
                                    <select class="chart__period" id="chartPeriod">
                                        <option value="30">Últimos 30 días</option>
                                        <option value="90">Últimos 90 días</option>
                                        <option value="180">Últimos 6 meses</option>
                                        <option value="365">Último año</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="reputationEvolutionChart"></canvas>
                        </div>
                        
                        <div class="chart__container">
                            <div class="chart__header">
                                <h3>Distribución de Estrellas</h3>
                            </div>
                            <canvas id="starsDistributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Badges and Achievements -->
                <div class="reputation__achievements">
                    <div class="achievements__header">
                        <h3>Insignias y Logros</h3>
                        <div class="achievements__tabs">
                            <button class="tab-btn tab-btn--active" data-tab="badges">Insignias</button>
                            <button class="tab-btn" data-tab="achievements">Logros</button>
                            <button class="tab-btn" data-tab="milestones">Hitos</button>
                        </div>
                    </div>
                    
                    <div class="achievements__content">
                        <!-- Badges Tab -->
                        <div class="tab-content tab-content--active" id="badgesTab">
                            <div class="badges__grid" id="badgesGrid">
                                <!-- Badges will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Achievements Tab -->
                        <div class="tab-content" id="achievementsTab">
                            <div class="achievements__list" id="achievementsList">
                                <!-- Achievements will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Milestones Tab -->
                        <div class="tab-content" id="milestonesTab">
                            <div class="milestones__list" id="milestonesList">
                                <!-- Milestones will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="reputation__activity">
                    <div class="activity__header">
                        <h3>Actividad Reciente</h3>
                        <div class="activity__filters">
                            <button class="filter-btn filter-btn--active" data-filter="all">Todas</button>
                            <button class="filter-btn" data-filter="tasks">Tareas</button>
                            <button class="filter-btn" data-filter="groups">Grupos</button>
                            <button class="filter-btn" data-filter="badges">Insignias</button>
                        </div>
                    </div>
                    
                    <div class="activity__list" id="activityList">
                        <!-- Activity items will be populated by JavaScript -->
                    </div>
                    
                    <div class="activity__footer">
                        <button class="button button--ghost" id="loadMoreActivity">
                            <i class="fas fa-plus"></i>
                            Cargar más actividad
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>
    </div>

    <!-- Evidence Modal -->
    <div class="modal" id="evidenceModal">
        <div class="modal-content modal-content--large">
            <div class="modal-header">
                <h2 id="evidenceModalTitle">Evidencia de Logro</h2>
                <button class="modal-close" onclick="closeEvidenceModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="evidence__content" id="evidenceContent">
                    <!-- Evidence content will be loaded here -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="button button--ghost" onclick="closeEvidenceModal()">
                    Cerrar
                </button>
                <button type="button" class="button button--primary" id="shareEvidence">
                    <i class="fas fa-share"></i>
                    Compartir Evidencia
                </button>
            </div>
        </div>
    </div>

    <!-- Badge Detail Modal -->
    <div class="modal" id="badgeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="badgeModalTitle">Detalle de Insignia</h2>
                <button class="modal-close" onclick="closeBadgeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="badge-detail__content" id="badgeDetailContent">
                    <!-- Badge detail content will be loaded here -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="button button--ghost" onclick="closeBadgeModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/sidebar-new.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/reputation.js"></script>
    <script src="js/header-buttons.js"></script>
</body>
</html>